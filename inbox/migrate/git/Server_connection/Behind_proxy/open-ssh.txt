Content-Type: text/x-zim-wiki
Wiki-Format: zim 0.4
Creation-Date: 2017-01-18T11:53:34+01:00

====== open-ssh ======
Created Wednesday 18 January 2017

To @connect (e.g. @push and @pull) from @Windows to @Github using an @rsa @key with @open_ssh from behind a @proxy:
* **user@hostname:~$** ''vim ~/.ssh/config'' and populate (or append) it with:

{{{code: lang="sh" linenumbers="True"
	ProxyCommand connect -S proxy.server.name:3128 %h %p

	Host github.com
	  User git
	  Port 22
	  Hostname github.com
	#   IdentityFile "C:\users\username\.ssh\id_rsa"
	  TCPKeepAlive yes
	  IdentitiesOnly yes

	Host ssh.github.com
	  User git
	  Port 443
	  Hostname ssh.github.com
	#  IdentityFile "C:\users\username\.ssh\id_rsa"
	  TCPKeepAlive yes
	  IdentitiesOnly yes
}}}


With the correct proxy hostname:port, and the paths to id_rsa (My version of mysgit includes `connect.exe`, so I do not need to download and compile [[https://web.archive.org/web/20130731110457/http://www.meadowy.org/~gotoh/ssh/connect.c|connect.c]] / [[https://web.archive.org/web/20130516045959/http://www.meadowy.org/~gotoh/ssh/connect.exe|connect.exe]]).

===== Method rationale =====
Setting **http.proxy** will //not// work for //ssh//. You need to actually proxy your ssh connection manually. See [[http://returnbooleantrue.blogspot.com/2009/06/using-github-through-draconian-proxies.html|this description]].

===== Notes =====
Note that if you want to connect via a socks4 proxy, then change ''-S'' to ''-H''.

{{{code: lang="sh" linenumbers="True"
ProxyCommand connect -H proxy.server.name:1080 %h %p
}}}


If you use a Linux file system, the file permission of **~/.ssh/config** must be 600, but on a standard NTFS windows partition, these kind of permissions do not exist.

If your proxy requires NTLM authentication, you can use [[http://cntlm.sourceforge.net/|cntlm]], see also [[http://stackoverflow.com/a/15343300/33499|this answer]].

===== References =====
* Adapted from (proxy ssh tunnel): [[https://stackoverflow.com/questions/5103083/ssh-in-git-behind-proxy-on-windows-7/6739420#6739420|SSH in git behind proxy on windows 7]]
